# NetBench: validation pipeline for reduction (single CSV case, extended QoIs).
steps:
  - id: sim
    task: sim.run_csv
    sim:
      name: cantera
      mechanism: gri30.yaml
      phase: gas
      initial:
        T: 1000.0
        P: 101325.0
        X:
          CH4: 1.0
          O2: 2.0
          N2: 7.52
      reactor:
        type: IdealGasConstPressureReactor
        energy: on
      time_grid:
        start: 0.0
        stop: 1.0e-3
        steps: 4
      solver:
        rtol: 1.0e-9
        atol: 1.0e-15
        max_steps: 100000
    params:
      conditions_file: benchmarks/assets/conditions/gri30_netbench_val.csv
      case_id: va000

  - id: observables
    task: observables.run
    inputs: { run_id: "@sim" }
    params:
      observables:
        - name: gas_composition
          params:
            stats: [last]
            species: [CO2, CO, H2O, CH4, O2, NO, NO2]
        - name: gas_composition
          params:
            stats: [max]
            species: [OH, HO2]
        - name: ignition_delay
          params: {}

  - id: features
    task: features.run
    inputs: { run_id: "@sim" }
    params:
      features:
        - name: timeseries_summary
          params:
            variables:
              - name: T
                stats: [max]

