steps:
  - id: sim
    task: sim.sweep_csv
    inputs: {}
    params:
      mechanism_path: ${mechanism.path}
      conditions_file: ${benchmarks.conditions_file}
      model: gri30
  - id: g
    task: graphs.build
    inputs: { runs: "@sim" }
    params: {}
  - id: f
    task: features.extract
    inputs: { runs: "@sim", graph: "@g" }
    params:
      feature_sets: [timeseries_summary, rop_summary]
      rop_top_n: 80
  - id: sens
    task: sensitivity.multiplier_scan
    inputs: { runs: "@sim" }
    params:
      targets: ["temperature_summary:T_final"]
      delta: 0.05
      top_k: 40
  - id: red
    task: reduction.prune_by_importance
    inputs: { graph: "@g", features: "@f" }
    params:
      method: rop_threshold
      threshold: 1.0e-4
  - id: viz
    task: viz.make
    inputs: { runs: "@sim", graph: "@g", features: "@f", sensitivity: "@sens" }
    params: { dashboard: chem }
